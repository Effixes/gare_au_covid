<div class="begin-rules background"
     data-controller="shuffle"
     data-shuffle-card-count-value="<%= @game.draw_pile_cards.length %>"
     data-shuffle-players-count-value="<%= @game.players.size %>">
  <div class="main-wrapper">
    <div class="container-player-avatar">

      <% ordered_players.each_with_index do |player,index| %>
        <!-- Mise en surbrillance du joueur en cours -->
        <% if player.id == game.current_player.id  %>
          <div class="player-avatar" data-shuffle-target="avatar">
            <h3> <%= player.name %> </h3>
            <%= image_tag "#{player.avatar}", class:'avatar-medium current-player-style' %>
            <div class="card-count" id=<%= "player-card-#{index}" %>>
              <%= player.cards.length %>
            </div>
          </div>
        <% else %>
          <!-- Gestion de l'affichage du joueur qui ne joue pas -->
          <% if player.alive == false %>
             <div class="player-avatar-dead">
              <h3> <%= player.name %> </h3>
              <%= image_tag "#{player.avatar}", class:'avatar-medium-dead' %>
            </div>
          <% else %>
            <div class="player-avatar">
              <h3> <%= player.name %> </h3>
              <%= image_tag "#{player.avatar}", class:'avatar-medium' %>
              <div class="card-count" id=<%= "player-card-#{index}" %>>
                <%= player.cards.length %>
              </div>
            </div>
          <% end %>
        <% end %>
      <% end %>
    </div>

    <div class="decks" data-shuffle-target="deck">
    </div>
  </div>
  <div data-shuffle-target="avatar" id="current-player-shuffle"></div>
</div>
